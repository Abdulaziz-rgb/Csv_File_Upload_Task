@model IEnumerable<Employee>

@{
    ViewBag.Title = "Junior Dotnet Developer Project Task";
}

<h2>Index Page</h2>
<form method="post" enctype="multipart/form-data" asp-controller="Home" asp-action="Index" class="mt-3">
    <div class="form-group row">
        <label  class="col-sm-2 col-form-label"></label>
        <div class="col-sm-4">
            <div class="custom-file">
                <input id="uploaded_file" type="file" name="file" accept="text/csv" class="form-control custom-file-input" />
            </div>
        </div>
        <div class="col-sm-2">
            <button class="btn btn-success" type="submit">Upload</button>
        </div>
        <div class="col-sm-2">
            <a class="btn btn-danger" asp-controller="Home" asp-action="DeleteAll">Delete Table Data</a>
        </div>
    </div>
</form>
<br/>
<br/>
<br/>

@{
    <table id="example" class="table table-striped" style="width: 100%">  
        <thead>  
        <tr>  
            <th class="text-center">
                @Html.DisplayNameFor(model => model.PayrollNumber)
            </th>  
            <th class="text-center">  
                @Html.DisplayNameFor(model => model.Forename)  
            </th>  
            <th class="text-center">  
                @Html.DisplayNameFor(model => model.Surname)  
            </th>  
            <th class="text-center">  
                @Html.DisplayNameFor(model => model.DateOfBirth)  
            </th >
            <th class="text-center">  
                @Html.DisplayNameFor(model => model.Telephone)  
            </th> 
            <th class="text-center">  
                @Html.DisplayNameFor(model => model.Mobile)  
            </th> 
            <th class="text-center">  
                @Html.DisplayNameFor(model => model.Address)  
            </th> 
            <th class="text-center">  
                @Html.DisplayNameFor(model => model.City)  
            </th> 
            <th class="text-center">  
                @Html.DisplayNameFor(model => model.Postcode)  
            </th>
            <th class="text-center">  
                @Html.DisplayNameFor(model => model.Email)  
            </th> 
            <th class="text-center">  
                @Html.DisplayNameFor(model => model.StartDate)  
            </th> 
            <th class="text-center"></th>
        </tr>  
        </thead>  
        <tbody>  
        @foreach (var item in Model)  
        {  
            <tr>  
                <td>  
                    @Html.DisplayFor(modelItem => item.PayrollNumber)  
                </td>  
                <td>  
                    @Html.DisplayFor(modelItem => item.Forename)  
                </td>  
                <td>  
                    @Html.DisplayFor(modelItem => item.Surname)  
                </td>  
                <td>  
                    @Html.DisplayFor(modelItem => item.DateOfBirth)  
                </td>
                <td>  
                    @Html.DisplayFor(modelItem => item.Telephone)  
                </td>
                <td>  
                    @Html.DisplayFor(modelItem => item.Mobile)  
                </td>
                <td>  
                    @Html.DisplayFor(modelItem => item.Address)  
                </td>
                <td>  
                    @Html.DisplayFor(modelItem => item.City)  
                </td>
                <td>  
                    @Html.DisplayFor(modelItem => item.Postcode)  
                </td>
                <td>  
                    <a href="#" class="link-success">@item.Email</a>   
                </td>
                <td>  
                    @Html.DisplayFor(modelItem => item.StartDate)  
                </td>
                <td>
                    <a asp-controller="Home" asp-action="Edit" asp-route-payrollId="@item.PayrollNumber" class="btn btn-outline-danger m-1">Edit</a>
                </td>
            </tr>  
        }  
        </tbody>  
    </table>
}


<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css"/>

@section Scripts
{
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js "></script>

    <script>  
        $(document).ready(function () {  
            $('#example').DataTable(
                {
                "processing" : true,
                "order" : [[2, 'asc']],
                "paging": true,
                "filter": true, 
                "columns" : [  
                             {"data": "PayrollNumber", "autoWidth": true }, 
                             {"data": "Forename", "autoWidth": true }, 
                             {"data": "Surname", "autoWidth": true }, 
                             {"data": "DateOfBirth", "autoWidth": true }, 
                             {"data": "Telephone", "autoWidth": true }, 
                             {"data": "Mobile", "autoWidth": true }, 
                             {"data": "Address", "autoWidth": true },
                             {"data": "City", "autoWidth": true }, 
                             {"data": "Postcode", "autoWidth": true }, 
                             {"data": "Email", "autoWidth": true }, 
                             {"data": "StartDate", "autoWidth": true },
                             {"data": "Edit", "autoWidth": true, "orderable": false}
                             ], 
                             language: { 
                                "emptyTable" : "No data found. Please upload new file!" 
                             } 
                });
             $('button').prop('disabled', true);
                    $('.form-control').on('change', function () {
                        var fileEmpty = $('#uploaded_file').get(0).files.length === 0;
                        if (!fileEmpty) {
                            $('button').prop('disabled', false);
                        } else {
                            $('button').prop('disabled', true);
                            }
                        });
        });  
    </script>
}

@* @section Scripts *@
@* { *@
@*     <script> *@
@*      *@
@*     $(document).ready(function () { *@
@*         $('button').prop('disabled', true); *@
@*         $('.form-control').on('change', function () { *@
@*             var fileEmpty = $('#uploaded_file').get(0).files.length === 0; *@
@*             if (!fileEmpty) { *@
@*                 $('button').prop('disabled', false); *@
@*             } else { *@
@*                 $('button').prop('disabled', true); *@
@*                 } *@
@*             }); *@
@*     }); *@
@*      *@
@*     </script> *@
@* } *@


